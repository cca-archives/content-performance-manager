<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">

    <!-- Use title if it's in the page YAML frontmatter -->
    <title>About</title>

    <!--[if gt IE 8]><!--><link href="stylesheets/screen.css" rel="stylesheet" media="screen" /><!--<![endif]-->
    <!--[if lte IE 8]><link href="stylesheets/screen-old-ie.css" rel="stylesheet" media="screen" /><![endif]-->

    <link rel="canonical" href="https://content-performance-api.publishing.service.gov.uk/">

    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
    <script src="javascripts/application.js"></script>
  </head>

  <body>
    <div class="app-pane">
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="skip-link">Skip to main content</a>

        <header class="header header--full-width">
  <div class="header__container">
    <div class="header__brand">
        <a href="/">
          <span class="govuk-logo">
            <img class="govuk-logo__printable-crown" src="images/gov.uk_logotype_crown_invert_trans.png" height="32" width="36">
            GOV.UK
          </span>
        <span class="header__title">
          Content Performance API
            <span class="phase-banner">Alpha</span>
        </span>
        </a>
    </div>

      <div data-module="navigation">
        <button type="button" class="header__navigation-toggle js-nav-toggle" aria-controls="navigation" aria-label="Show or hide top level navigation">Menu</button>

        <nav id="navigation" class="header__navigation js-nav" aria-label="Top Level Navigation" aria-hidden="true">
          <ul>
              <li class="active">
                <a href="/">
                  About
                </a>
              </li>
              <li>
                <a href="/reference.html">
                  Reference
                </a>
              </li>
          </ul>
        </nav>
      </div>
  </div>
</header>

      </div>

      <div id="toc-heading" class="toc-show fixedsticky">
        <a href="#toc" class="toc-show__label js-toc-show" aria-controls="toc">
          Table of contents <span class="toc-show__icon"></span>
        </a>
      </div>

      <div class="app-pane__body" data-module="in-page-navigation">
        <div class="app-pane__toc">
          <div class="toc" data-module="table-of-contents">
            <a href="#" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></a>
            <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading">
              <ul>
  <li>
    <a href="#gov-uk-content-performance-api">GOV.UK Content Performance API</a>
    <ul>
      <li>
        <a href="#what-does-this-api-do">What does this API do?</a>
      </li>
      <li>
        <a href="#rate-limiting">Rate limiting</a>
      </li>
      <li>
        <a href="#version">Version</a>
      </li>
      <li>
        <a href="#before-you-start">Before you start</a>
        <ul>
          <li>
            <a href="#register-an-api-key">Register an API key</a>
            <ul>
              <li>
                <a href="#gov-uk-users">GOV.UK users:</a>
              </li>
              <li>
                <a href="#gds-users">GDS users:</a>
              </li>
              <li>
                <a href="#government-users">Government users:</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="#find-out-content-ids">Find out Content IDs</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="#getting-started">Getting started</a>
        <ul>
          <li>
            <a href="#get-a-full-list-of-available-metrics">Get a full list of available metrics</a>
          </li>
          <li>
            <a href="#get-metrics-data-for-a-single-piece-of-content">Get metrics data for a single piece of content</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="#api-reference">API reference</a>
      </li>
      <li>
        <a href="#authentication-and-authorisation">Authentication and authorisation</a>
      </li>
      <li>
        <a href="#testing">Testing</a>
      </li>
      <li>
        <a href="#security-and-compliance">Security and compliance</a>
        <ul>
          <li>
            <a href="#reporting-vulnerabilities">Reporting vulnerabilities</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="#security-guidelines">Security guidelines</a>
      </li>
      <li>
        <a href="#support">Support</a>
      </li>
    </ul>
  </li>
</ul>

            </nav>
          </div>
        </div>

        <div class="app-pane__content toc-open-disabled">
          <main id="content" class="technical-documentation" data-module="anchored-headings">
            <h1 id="gov-uk-content-performance-api">GOV.UK Content Performance API</h1>
<div class="phase-tag">
  <p>
    <strong class="phase-banner">Alpha</strong>
    <span>
      This is a trial service. <a href="#version">Find out what
      this means</a>.
    </span>
  </p>
</div>
<h2 id="what-does-this-api-do">What does this API do?</h2>
<p>This API provides access to time series metrics data about the performance of GOV.UK content. Examples of metrics include unique page views and number of PDF attachments. Refer to the <a href="/#getting-started">getting started section</a> for a complete list of metrics.</p>

<p>This API does not expose the content itself. Use the <a href="https://content-api.publishing.service.gov.uk">GOV.UK Content API</a> to access the content.</p>
<h2 id="rate-limiting">Rate limiting</h2>
<p>There is a limit of 10 requests per second per client. All requests over this limit will not be processed, and you will receive a response with <code>HTTP status code 429 (too many requests)</code>.</p>

<p>Your application should handle this exception by retrying the request at a later time.</p>

<p><a href="http://dev.gov.uk:4567/#support">Contact support</a> if you want to increase this limit.</p>
<h2 id="version">Version</h2>
<p>GOV.UK Content Performance API is currently in alpha and is likely to change between versions.</p>

<p>You may use the API and build applications that use it, but live services should not currently rely on the API or the data it provides.</p>
<h2 id="before-you-start">Before you start</h2><h3 id="register-an-api-key">Register an API key</h3>
<p>Using GOV.UK Content Performance API currently requires <a href="/#authentication-and-authorisation">authentication</a> using an OAuth2 bearer token.</p>
<h4 id="gov-uk-users">GOV.UK users:</h4>
<ol>
<li>Go to <a href="https://signon.publishing.service.gov.uk/">GOV.UK Signon</a>.</li>
<li>Click <code>API Users</code>.</li>
<li>Click <code>Create API user button</code>.</li>
<li>Create the API user.</li>
<li>Click <code>Add application token</code> and select <code>Content Performance Manager</code> from the list.</li>
<li>Copy the bearer token.</li>
</ol>
<h4 id="gds-users">GDS users:</h4>
<p>Contact us through #govuk-developers on <a href="https://govuk.slack.com">GOV.UK Slack</a>.</p>
<h4 id="government-users">Government users:</h4>
<p>Contact the GOV.UK Content Performance API team through <a href="https://www.zendesk.co.uk/">Zendesk</a>.</p>
<h3 id="find-out-content-ids">Find out Content IDs</h3>
<p>To query the API, you need to know the content ID for the piece of content you are interested in.</p>

<p>You can find out the content ID for GOV.UK pages using the <a href="https://content-api.publishing.service.gov.uk">GOV.UK Content API</a>.</p>

<p>For example, for https://www.gov.uk/vat-rates, you can query the Content API using the following code:</p>
<div class="highlight"><pre class="highlight shell"><code>curl https://www.gov.uk/api/content/vat-rates | python <span class="nt">-m</span> json.tool <span class="c"># Pretty print JSON</span>
</code></pre></div><div class="highlight"><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"analytics_identifier"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"base_path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/vat-rates"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"content_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f838c22a-b2aa-49be-bd95-153f593293a3"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"content_purpose_document_supertype"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guidance"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"content_purpose_supergroup"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guidance_and_regulation"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"content_purpose_subgroup"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guidance"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"document_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"answer"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email_document_supertype"</span><span class="p">:</span><span class="w"> </span><span class="s2">"other"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"first_published_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2011-09-12T15:43:03.000+00:00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"government_document_supertype"</span><span class="p">:</span><span class="w"> </span><span class="s2">"other"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"navigation_document_supertype"</span><span class="p">:</span><span class="w"> </span><span class="s2">"guidance"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"need_ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"live"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"public_updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-12-12T14:55:23.000+00:00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"publishing_app"</span><span class="p">:</span><span class="w"> </span><span class="s2">"publisher"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"publishing_scheduled_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"rendering_app"</span><span class="p">:</span><span class="w"> </span><span class="s2">"government-frontend"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"scheduled_publishing_delay_seconds"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"schema_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"answer"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"search_user_need_document_supertype"</span><span class="p">:</span><span class="w"> </span><span class="s2">"core"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VAT rates"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-26T16:21:14.213Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"user_journey_document_supertype"</span><span class="p">:</span><span class="w"> </span><span class="s2">"thing"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"withdrawn_notice"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"publishing_request_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3592-1504179295.816-10.3.3.1-410"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
  </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Current VAT rates - standard 20% and rates for reduced rate and zero-rated items"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Pass the content_id value to the content performance API.</p>
<h2 id="getting-started">Getting started</h2><h3 id="get-a-full-list-of-available-metrics">Get a full list of available metrics</h3>
<p>The exact metrics provided by the API may change over time. To retrieve the full list:</p>
<div class="highlight"><pre class="highlight plaintext"><code>curl -H 'Authorization: Bearer your-token-here' https://content-performance-manager.publishing.service.gov.uk/api/v1/metrics | python -m json.tool
</code></pre></div><div class="highlight"><pre class="highlight plaintext"><code>[
{
  "description": "Number of pageviews",
  "source": "Google Analytics",
  "metric_id": "pageviews"
},
{
  "description": "Number of unique pageviews",
  "source": "Google Analytics",
  "metric_id": "unique_pageviews"
},
{
  "description": "Number of reported content issues",
  "source": "Feedback explorer",
  "metric_id": "feedex_comments"
},
{
  "description": "Number of .pdf attachments",
  "source": "Publishing API",
  "metric_id": "number_of_pdfs"
},
...
]
</code></pre></div><h3 id="get-metrics-data-for-a-single-piece-of-content">Get metrics data for a single piece of content</h3>
<p>You can use the <code>/metrics/[metric-id]/[content-id]/</code> endpoint to get the value of any metric; for example, the number of page views.</p>

<p>To summarise the recorded data over a requested time frame:</p>
<div class="highlight"><pre class="highlight shell"><code>curl <span class="nt">-H</span> <span class="s1">'Authorization: Bearer your-token-here'</span> https://content-performance-manager.publishing.service.gov.uk/api/v1/metrics/f838c22a-b2aa-49be-bd95-153f593293a3?from<span class="o">=</span>2018-02-28&amp;to<span class="o">=</span>2018-02-28&amp;metric<span class="o">=</span>pageviews
</code></pre></div>
<p>The <code>from</code> and <code>to</code> query parameters specify the date range to query.</p>

<p>To get data points for each day in the requested time frame:</p>
<div class="highlight"><pre class="highlight shell"><code>curl <span class="nt">-H</span> <span class="s1">'Authorization: Bearer your-token-here'</span> https://content-performance-manager.publishing.service.gov.uk/api/v1/metrics/time-series/f838c22a-b2aa-49be-bd95-153f593293a3?from<span class="o">=</span>2018-02-28&amp;to<span class="o">=</span>2018-02-28&amp;metric<span class="o">=</span>pageviews
</code></pre></div><h2 id="api-reference">API reference</h2>
<p>The GOV.UK Content API is accessed using HTTP and returns data in a JSON format. The <a href="https://content-performance-api.publishing.service.gov.uk/reference.html#gov-uk-content-performance-api-v1-0-0">reference documentation</a> details the endpoints, methods and responses.</p>

<p>All examples are written in curl.</p>
<h2 id="authentication-and-authorisation">Authentication and authorisation</h2>
<p>To authenticate, include an Authorization header like the following:</p>
<div class="highlight"><pre class="highlight plaintext"><code>Authorization: Bearer your-token-here
</code></pre></div><h2 id="testing">Testing</h2>
<p>You can test your integration in the live environment. There is no sandbox environment provided for testing.</p>
<h2 id="security-and-compliance">Security and compliance</h2><h3 id="reporting-vulnerabilities">Reporting vulnerabilities</h3>
<p>If you believe there is a security issue with GOV.UK Content Performance API, please <a href="#support">contact us immediately</a>.</p>

<p>Please don’t disclose the suspected breach publicly until it has been fixed.</p>
<h2 id="security-guidelines">Security guidelines</h2>
<p><a href="https://content-performance-api.publishing.service.gov.uk/#gov-uk-content-performance-api">GOV.UK Content Performance API</a> follows <a href="https://www.ncsc.gov.uk/guidance/tls-external-facing-services">government HTTPS security guidelines</a> for external facing services and uses HTTPS to provide secure connections.</p>
<h2 id="support">Support</h2>
<p>If you experience any issues or have questions regarding GOV.UK Content Performance API
please:</p>

<ul>
<li><strong>if you are a government department:</strong> Raise a ticket with <a href="http://dev.gov.uk:4567/#Support">GOV.UK Support</a></li>
<li><strong>otherwise:</strong> <a href="https://www.gov.uk/contact/govuk">Contact GOV.UK</a> with your query</li>
</ul>

          </main>

          <footer class="footer">
  <div class="footer__licence">
    <a class="footer__licence-logo" href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/" rel="license">Open Government Licence</a>
    <p class="footer__licence-description">All content is available under the <a href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/" rel="license">Open Government Licence v3.0</a>, except where otherwise stated</p>
  </div>

  <div class="footer__copyright">
    <a class="footer__copyright-logo" href="http://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/copyright-and-re-use/crown-copyright/">© Crown copyright</a>
  </div>
</footer>

        </div>
      </div>
    </div>

    
  </body>
</html>
